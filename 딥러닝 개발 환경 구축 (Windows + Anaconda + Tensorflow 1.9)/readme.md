윈도우에서 tensorflow를 사용하기 위한 환경설정을 진행해보자! 

나는 파이썬 3 버전과 텐서플로우 1 버전이 익숙하기 때문에 이를 가상환경에 설치해 볼 것이다.

​          

**설치 환경**

------------------

Windows 10 Home

Intel i5-8600 @3.1GHz, RAM 8GB

NVIDIA GeForce GTX 1060 3GB

​             

**Anaconda 3 설치**

--------------------------------

Anaconda는 파이썬에서 data science 관련 패키지를 다 모아 배포하는 플랫폼이다.        

아나콘다에서는 윈도우 cmd 처럼 생긴 'Anaconda Prompt' 라는 것을 제공하기 때문에 이를 이용하면 어느 파이썬 패키지나 라이브러리도 아주 쉽게 설치할 수 있다는 장점이 있다!         

또한 아나콘다를 깔면 자동으로 spyder도 깔리고 jupyter notebook도 깔려서 파이썬 코드 빌드 및 실행 또한 할 수 있으므로 <u>파이썬 개발을 할 예정이라면 이것저것 다 깔지말고 그냥 아나콘다만 까는 게 정신건강에 이롭다.</u>       

아나콘다를 설치하는 건 아주 쉽다. 그냥 홈페이지 가서 자기한테 맞는 os 용을 다운받아 설치하면 된다.     

[아나콘다 다운로드 홈페이지](https://www.anaconda.com/products/individual)

나는 Python 3.6 version 윈도우 64bit 용을 다운받았다.                 

​                             

**CUDA / cuDNN 설치**

---------------------------------

tensorflow를 cpu만 사용해서 돌릴 거라면 이 부분은 스킵해도 된다!         

만약 tensorflow gpu 버전을 사용할거라면 이 부분은 필수인데 한가지 조건은 NVIDIA 제품 중 CUDA를 지원하는 그래픽 카드가 컴퓨터에 설치되어 있어야한다는 것이다. 그치만 이건 요새 나오는 NVIDIA 제품들이라면 무조건 지원하니까 굳이 확인 안해봐도 될듯....?                        

이 두개가 뭔지 간단히 알아보자면,               

CUDA는 GPU를 사용하여 병렬 컴퓨팅을 더 효과적으로 할 수 있게 해주는 라이브러리이고            

cuDNN은 CUDA Deep Neural Network library의 약자로 딥러닝을 돌릴 때 특화된 라이브러리이다.          

그러니까 tensorflow gpu 버전을 사용하려면 꼭 둘 다 있어야겠죠?!           

그치만 두 개 다 그래픽 카드만 있다고 사용할 수 있는 것은 아니고 NVIDIA 홈페이지를 가서 라이브러리를 직접 설치해야 한다. 이 때 주의할 점은 내가 설치할 텐서플로우 버전에 유의해서 그에 맞는 CUDA와 cuDNN 버전을 설치해야한다는 것이다.           

만약 버전이 맞지 않는다면 오랜 시간 기다려서 설치한 보람도 없이 호환이 되지 않기 때문에 다 삭제하고 새로 까는 불상사가 발생한다....... 정신건강을 위해 호환되는 버전을 꼭! 미리 확인하자!!          

호환되는 버전 확인은 여기서 -> [호환 버전 확인](https://www.tensorflow.org/install/source_windows#tested_build_configurations)

여기서는 텐서플로우 1.9 버전을 설치할 것이기 때문에 CUDA 9.0 과 cuDNN 7.1.4 를 설치할 것이다.      

[CUDA 다운로드 링크](https://developer.nvidia.com/cuda-toolkit-archive) [cuDNN 다운로드 링크](https://developer.nvidia.com/cudnn)        

CUDA는 로그인이 필요없는데 cuDNN은 로그인이 필요하다!        

CUDA는 다운로드 파일을 실행하면 자동으로 설치되고 cuDNN의 경우엔 실행 파일이 아니라 그냥 압축 파일이 받아진다. 압축을 풀면 라이브러리 파일만 덩그러니 있는데 당황하지 말고 CUDA가 설치되어 있는 폴더에 복사해주기만 하면 된다! cudnn 속 각각의 bin, include, lib 폴더에 있는 파일들을 CUDA 폴더의 bin, include, lib 폴더에 복붙해주면 끝!               

​            

**아나콘다 가상환경 생성**

------------------------------------

개발환경을 구축할 때는 왠만해선 가상환경 위에 구축하는 게 좋다.             

컴퓨터가 좀 무거워진다는 단점이 있지만 여러 가지 개발 환경을 구축할 수 있다는 장점이 있기 때문에 실제 기업 서비스 같이 속도가 중요한 프로그램을 만드는 게 아닌 이상 단점은 크게 신경 쓰이지 않는다. (대신 개발 환경이 정말 중요하고 다같이 일하는 현업에서는 개발 환경을 도커 이미지로 만들어 배포한 뒤 그 위에서 개발을 하게 된다! 도커 이미지는 가상환경에 비해 정말 가볍기 때문에 많이 사용하는 추세. 이 부분에 대해선 나중에 자세히 설명할 예정!)                    

아무튼 이제 가상환경을 만들고 거기에 텐서플로우 개발 환경을 설치하러 가보자 !         

Anaconda Prompt를 열고 아래 명령어를 치면 <u>가상환경 생성</u>이 완료된다.                

```cmd
conda create -n (생성할 가상환경 이름) python=(원하는 파이썬 버전)
```

가상환경은 원하는 파이썬 버전을 선택해 생성이 가능하다. 나는 그냥 3.6 버전으로 설치했다.           

현재 생성된 <u>가상환경 리스트를 확인</u>하려면 Anaconda Prompt에 아래 명령어를 치면 된다.           

```cmd
conda info --envs
```

생성한 <u>가상환경으로 들어가려면</u>

```cmd
conda activate (들어갈 가상환경 이름)
```

이렇게 들어가면 앞에 (base) 로 표현되던 부분이 (가상환경 이름) 으로 바뀐다.             

해당 <u>가상환경에서 나오려면</u> 

```cmd
conda deactivate
```

​                        

**텐서플로우 설치**

------------------------------------

Anaconda Prompt에서 명령어 하나만 입력하면 끝난다.........!             

gpu 버전을 설치하고 싶다면             

```cmd
conda install --ignore-installed --upgrade tensorflow-gpu==(원하는 버전)
```

원하는 버전을 입력하지 않으면 자동으로 최신 버전으로 설치된다. cpu 버전을 설치하고 싶으면           

```cmd
conda install --ignore-installed --upgrade tensorflow==(원하는 버전)
```

나는 텐서플로우 1 버전이 더 편하기 때문에 1.9 버전을 설치했다.           

​                        

**설치 확인**

---------------

이제 설치가 잘 되었는지 확인만 하면 된다. 설치한 가상환경에 들어가서 python 을 치면 파이썬 명령어를 한줄씩 칠 수 있게 나온다. 거기에서 한줄씩 아래 명령어를 치면 된다.            

```python
>>> import tensorflow as tf
>>> print(tf.__version__)
```

출력값으로 내가 설치한 텐서플로우 버전이 나오면 설치가 완료된 것이다!                    

위의 파이썬 창을 나오고 싶으면 exit() 를 치면 된다.                    